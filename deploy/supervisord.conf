[supervisord]
nodaemon=true
logfile_maxbytes=0  ; ðŸ”¥ Prevents supervisor's own log rotation issue

[program:nginx]
command=nginx -g "daemon off;"
stdout_logfile=/var/log/supervisor/nginx.log   ; ðŸ”¥ Use actual file
stderr_logfile=/var/log/supervisor/nginx_error.log
stdout_logfile_maxbytes=0  ; ðŸ”¥ Disable rotation
stderr_logfile_maxbytes=0
autostart=true
autorestart=true

[program:php-fpm]
command=docker-php-entrypoint php-fpm
stdout_logfile=/var/log/supervisor/php-fpm.log
stderr_logfile=/var/log/supervisor/php-fpm_error.log
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
autostart=true
autorestart=true

[program:schedule]
command=php artisan schedule:work --verbose
directory=/var/www
stdout_logfile=/var/log/supervisor/schedule.log
stderr_logfile=/var/log/supervisor/schedule_error.log
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
autostart=true
autorestart=true